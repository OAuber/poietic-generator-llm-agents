<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poietic Generator Player</title>
    <link rel="stylesheet" href="/css/player-style.css?v=<%= Time.utc.to_unix %>">
    <link rel="stylesheet" href="/css/share-dialog.css?v=<%= Time.utc.to_unix %>">
    <script type="module" src="/js/poietic-player.js?v=<%= Time.utc.to_unix %>"></script>
    <script type="module" src="/js/poietic-player-share.js?v=<%= Time.utc.to_unix %>"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Colonne gauche / Partie haute -->
        <div class="control-panel left-panel">
            <div class="session-list-container">
                <h2>Available Sessions (<span id="total-sessions-display">0</span>)</h2>
                <div class="pagination-controls">
                    <button id="prev-page" disabled>&laquo; Prev</button>
                    <span id="page-info">Page 1 / 1</span>
                    <button id="next-page" disabled>Next &raquo;</button>
                </div>
            </div>
            <div class="share-button" id="share-button">
                <svg class="share-icon" viewBox="0 0 24 24" width="24" height="24">
                    <circle cx="6" cy="12" r="3" fill="currentColor"/>
                    <circle cx="16" cy="18" r="3" fill="currentColor"/>
                    <circle cx="16" cy="6" r="3" fill="currentColor"/>
                    <line x1="6" y1="12" x2="16" y2="18" 
                          stroke="currentColor" 
                          stroke-width="2"
                          stroke-linecap="round"/>
                    <line x1="6" y1="12" x2="16" y2="6" 
                          stroke="currentColor" 
                          stroke-width="2"
                          stroke-linecap="round"/>
                </svg>
            </div>
            <button id="btn-change-session" style="margin-top: 10px;">Change Session</button>
        </div>

        <!-- Zone centrale (grille ET liste des sessions) -->
        <div class="grid-container">
            <div class="main-zone">
                <div id="poietic-grid"></div>
                <ul id="session-list-ul" class="session-list-overlay">
                </ul>
                <div id="player-overlay">
                    <div class="player-overlay-title">Poietic Generator</div>
                    <div class="player-overlay-subtitle">Pixel Love since 1986</div>
                    <div class="player-overlay-message">
                        <button id="play-button" class="control-button">
                            <span>PLAY</span>
                        </button>
                        <div class="or-separator">or</div>
                        <button id="btn-select-session-overlay" class="replay-link">REPLAY / SELECT</button>
                    </div>
                    <div class="player-overlay-footer">Copyleft, Free Art License</div>
                </div>
            </div>
        </div>

        <!-- Colonne droite / Partie basse -->
        <div class="control-panel right-panel">
            <div class="playback-controls">
                <button id="btn-reset" class="control-btn">⏮</button>
                <button id="btn-play" class="control-btn">▶</button>
                <button id="btn-pause" class="control-btn">⏸</button>
            </div>
            <div class="progress-container">
                <input type="range" id="progress-bar" min="0" max="100" value="0" class="progress">
                <div class="time-display">
                    <span id="current-time">00:00</span> / <span id="total-time">00:00</span>
                </div>
            </div>
            <div class="speed-control">
                <select id="playback-speed" class="control-item">
                    <option value="0.5">0.5×</option>
                    <option value="1.0" selected>1.0×</option>
                    <option value="2.0">2.0×</option>
                    <option value="5.0">5.0×</option>
                </select>
            </div>
        </div>
    </div>
</body>
</html>
/* Reset et variables */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --main-button-size: 160px;
    --spacing: 8px;
    --background-color: #000000;
    --text-color: #ffffff;
    --overlay-background: rgba(0, 0, 0, 0.7);
    --grid-background: #000000;
}

/* Variables pour le mode clair */
body.light-mode {
    --background-color: #ffffff;
    --text-color: #000000;
    --overlay-background: rgba(255, 255, 255, 0.7);
    --grid-background: #ffffff;
}

/* Structure principale */
body {
    position: relative;
    z-index: 0;
}

#main-container {
    width: 100%;
    height: 100vh;
    display: flex;
    margin: 0;
    padding: 0;
    overflow: hidden;
    position: relative;
    z-index: 1;
}

/* Structure de base */
.tools-zone {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Zones centrales - Dimensions strictement identiques */
#zone-3b,
#zone-2b {
    flex: none !important; /* Force la suppression de flex */
}

/* Format horizontal */
@media (orientation: landscape) {
    .tools-zone {
        display: flex;
        flex-direction: column;
    }

    .sub-zone {
        flex: 1;
        display: flex;
        overflow: hidden; /* Empêche les sliders */
    }

    .split-zone {
        flex: 1;
        display: flex;
        position: relative;
        overflow: hidden; /* Empêche les sliders */
    }

    /* Container principal - même structure pour toutes les zones */
    #zone-3a1 .stat-container,
    #zone-3a2 .stat-container,
    #zone-3c1 .stat-container,
    #zone-3c2 .stat-container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        padding: 8px;
    }

    /* Titre - même structure pour tous */
    #zone-3a1 .stat-title,
    #zone-3a2 .stat-title,
    #zone-3c1 .stat-title,
    #zone-3c2 .stat-title {
        position: absolute;
        top: 80px;
        left: 0;
        right: 0;
        width: 100%;
        text-align: center !important;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0;
    }

    /* Contenu - même structure pour tous */
    #zone-3a1 .stat-content,
    #zone-3a2 .stat-content,
    #zone-3c1 .stat-content,
    #zone-3c2 .stat-content {
        height: 80%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Structure des lignes */
    .stat-row {
        display: flex;
        width: 100%;
        margin-bottom: 4px;
    }

    .stat-label {
        flex: 1;
        text-align: left;
    }

    .stat-value {
        text-align: right;
        padding-left: 8px;
        padding-right: 12px;
    }

    /* Empêcher tout overflow qui pourrait causer des sliders */
    .tool-circle {
        overflow: hidden;
    }

    /* Contenu - position ajustée */
    .stat-details {
        position: absolute;
        top: 55%;
        transform: translateY(-50%);
        width: calc(100% - 16px);
        padding: 0 8px;
    }
}

/* Format vertical */
@media (orientation: portrait) {
    .tools-zone {
        flex-direction: row;
}

.sub-zone {
        flex: 1;
    display: flex;
        flex-direction: column;
    }

    .split-zone {
    flex: 1;
    position: relative;
    }

    /* Définition stricte de la taille des zones centrales */
    #zone-3b {
        height: 100%;
        width: 33.33vw !important;
        min-width: 33.33vw !important;
        max-width: 33.33vw !important;
    }

    #zone-2b {
        height: 100%;
        width: 33.33vw !important;
        min-width: 33.33vw !important;
        max-width: 33.33vw !important;
    }

    /* Les autres zones s'adaptent à l'espace restant */
    #zone-3a,
    #zone-3c,
    #zone-2a,
    #zone-2c {
    flex: 1;
    }

    /* Alignement SESSION et STATISTICS */
    #zone-3a1 .stat-container,
    #zone-3c1 .stat-container {
        position: absolute;
        top: 0;
        padding-top: 8px;
        width: 100%;
    }

    /* Alignement CONNECTIONS et USER */
    #zone-3a2 .stat-container,
    #zone-3c2 .stat-container {
        position: absolute;
        top: 0;
        padding-top: 8px;
        width: 100%;
    }
}

/* Styles de texte uniformes */
.stat-title,
.stat-label,
.stat-value,
.stat-row {
    font-family: Calibri, 'Trebuchet MS', sans-serif;
}

/* Format horizontal - textes */
@media (orientation: landscape) {
    .stat-title,
    .stat-label,
    .stat-value,
    .stat-row {
        font-size: 11px;
        line-height: 1.4;
    }
}

/* Format vertical - textes */
@media (orientation: portrait) {
    .stat-title,
    .stat-label,
    .stat-value,
    .stat-row {
        font-size: 8px;
        line-height: 1;
    }

    #zone-3a2 .stat-title,
    #zone-3a2 .stat-label,
    #zone-3a2 .stat-value,
    #zone-3a2 .stat-row,
    #zone-3c2 .stat-title,
    #zone-3c2 .stat-label,
    #zone-3c2 .stat-value,
    #zone-3c2 .stat-row {
        font-size: 7px;
        line-height: 0.9;
    }
}

/* Styles communs */
.stat-container {
    padding: 8px;
}

.stat-title {
    text-align: left;
    font-weight: bold;
    margin-bottom: 8px;
}

/* Structure de base pour les lignes */
.stat-row {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin: 0;
    padding: 0;
}

/* Labels alignés à gauche */
.stat-label {
    text-align: left;
    flex-shrink: 0;
}

/* Valeurs alignées à droite */
.stat-value {
    text-align: right;
    margin-left: auto;
}

/* Styles spécifiques pour la zone Session (3a1) */
#zone-3a1 .stat-row {
    justify-content: flex-start; /* Pour le label "Start time:" */
}

#zone-3a1 .stat-value {
    margin-left: auto; /* Pour pousser les valeurs de date/heure à droite */
}

/* Styles spécifiques pour la zone Connections (3a2) */
#zone-3a2 .stat-row {
    justify-content: space-between;
}

/* Styles spécifiques pour la zone Statistics (3c1) */
#zone-3c1 .stat-row {
    justify-content: space-between;
}

#zone-3c1 .vector-indicator {
    margin-right: 4px;
}

/* Ajustement des espacements */
.stat-group {
    margin-bottom: 4px;
}

/* Maintien des tailles de police uniformes */
@media (orientation: landscape) {
    .stat-title,
    .stat-label,
    .stat-value {
        font-size: 11px;
        line-height: 1.4;
    }
}

@media (orientation: portrait) {
    .stat-title,
    .stat-label,
    .stat-value {
        font-size: 8px;
        line-height: 1;
    }

    #zone-3a2 .stat-title,
    #zone-3a2 .stat-label,
    #zone-3a2 .stat-value,
    #zone-3c2 .stat-title,
    #zone-3c2 .stat-label,
    #zone-3c2 .stat-value {
        font-size: 7px;
        line-height: 0.9;
    }
}

.vector-indicator {
    display: inline;
    margin: 0 2px;
}

/* Ajustements pour très petits écrans */
@media (max-width: 480px) {
    .stat-title,
    .stat-label,
    .stat-value,
    .stat-row {
        font-size: 6px;
    }
    
    .stat-row {
        padding-left: 4px;
    }
}

/* Boutons standards */
.tool-circle {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--background-color);
    color: var(--text-color);
}

/* Styles spécifiques pour les icônes */
.tool-circle .zoom-icon,
.tool-circle .import-icon,
.tool-circle .theme-icon,
.tool-circle .share-icon {
    width: min(40%, 40px);
    height: min(40%, 40px);
    margin: auto;
}

/* Styles spécifiques pour les zones de statistiques */
.tool-circle .stat-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 8px 5px;
}

.stat-title {
    width: 100%;
    text-align: center;
    margin-bottom: 8px;
    font-weight: bold;
}

.stat-details {
    width: 100%;
    font-size: 11px;
    font-family: monospace;
}

.stat-row {
    padding-left: 12px;
    line-height: 1.4;
    white-space: nowrap;
    color: var(--text-color);
}

.stat-label {
    min-width: 90px;
    opacity: 0.8;
}

.stat-value {
    flex: 1;
}

/* Masquer le contenu des boutons en mode déconnecté */
body.disconnected .tool-circle > * {
    opacity: 0.3;  /* ou display: none; si vous préférez les cacher complètement */
}

/* Couleurs des boutons standards - temporairement en blanc pour debug */
#zone-3a1 .tool-circle { background-color: #000000; }
#zone-3a2 .tool-circle { background-color: #000000; }
#zone-3c1 .tool-circle { background-color: #000000; }
#zone-3c2 .tool-circle { background-color: #000000; }
#zone-2a2 .tool-circle { background-color: #000000; }
#zone-2c1 .tool-circle { background-color: #000000; }
#zone-2c2 .tool-circle { background-color: #000000; }

/* Boutons spéciaux */
#zone-3b, #zone-2b {
    aspect-ratio: 1/1;
}

/* Zone de connexion */
.connection-tools {
    position: relative;
    width: 100%;
    height: 100%;
    z-index: 400;
}

.activity-box {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #000000;
    z-index: 400;
}

#activity-cursor {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--background-color);
    transition: height 0.3s ease, background-color 0.3s ease;
    border-top: 1px solid var(--text-color);
    z-index: 400;
}

/* Style du bouton reconnect */
#reconnect-button {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    z-index: 450;
    background-color: #000000;
    color: white;
    border: none;
    outline: none;
    /* Nouveaux styles pour harmoniser avec TIME OUT */
    font-family: Calibri, 'Trebuchet MS', sans-serif;
    font-size: 30px;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.3s ease-in;
}

/* Activation du bouton reconnect */
body.disconnected #reconnect-button {
    display: block;
    opacity: 1;
}

/* Zone de couleurs */

.color-tools {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 400;
}

#color-palette {
    position: relative;
    width: 100%;
    height: 100%;
    aspect-ratio: auto;
    z-index: 400;
    background-color: transparent;
}

#color-preview {
    width: 100%;
    height: 100%;
    border-radius: 0;
    box-shadow: none;
    cursor: pointer;
    position: relative;
    z-index: 400;
    display: flex;
}

.color-preview-left,
.color-preview-right {
    flex: 1;
    height: 100%;
    cursor: pointer;
}

.color-preview-right {
    border-left: 1px solid #666;
}

#user-palette {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
    border-radius: 0;
    display: none;
    cursor: crosshair;
    z-index: 450;
    background-color: white;
}

#gradient-palette {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
    border-radius: 0;
    display: none;
    cursor: crosshair;
    z-index: 450;
    background-color: white;
}

/* Zone de dessin */
.main-zone {
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    flex: none;
    position: relative;
    background-color: var(--grid-background);
    transition: background-color 0.3s ease;
    z-index: 100;
}

#poietic-grid {
    width: 100%;
    height: 100%;
    position: relative;
    background-color: var(--grid-background);
    z-index: 200;
}

/* Overlay principal */
#disconnect-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--overlay-background);
    z-index: 2000;
    display: none;
    font-family: Calibri, 'Trebuchet MS', sans-serif;
    opacity: 0;  /* Commencer invisible */
    transition: opacity 0.3s ease-in, background-color 0.3s ease;  /* Uniquement fade in */
}

/* Styles pour les textes de l'overlay */
.overlay-title {
    position: absolute;
    top: 10px;
    left: 0;
    width: 100%;
    color: var(--text-color);
    font-size: 18px;
    font-weight: bold;
    text-align: center;
}

.overlay-subtitle {
    position: absolute;
    top: 30px;
    left: 0;
    width: 100%;
    color: var(--text-color);
    font-size: 28px;
    font-family: 'Edwardian Script ITC', 'Brush Script MT', cursive;
    text-align: center;
}

.overlay-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-color);
    font-size: 30px;
    font-weight: bold;
    text-align: center;
    width: 100%;
}

.replay-link, #play-button {
    color: white;
    text-decoration: none;
    font-family: inherit;
    font-size: 30px;
    font-weight: bold;
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    cursor: pointer;
    line-height: 1;
}

.replay-link:hover, #play-button:hover {
    text-decoration: underline;
}

.overlay-footer {
    position: absolute;
    bottom: 10px;
    left: 0;
    width: 100%;
    color: var(--text-color);
    font-size: 12px;
    text-align: center;
    font-family: Calibri, 'Trebuchet MS', sans-serif;
    font-weight: normal;
}

/* Activation de l'overlay uniquement en mode déconnecté */
body.disconnected #disconnect-overlay {
    display: block !important;
    opacity: 1;  /* Devient visible avec la transition */
}

/* Styles des cellules utilisateurs */
.user-cell {
    position: absolute;
    display: grid;
    grid-template-columns: repeat(20, 1fr);
    grid-template-rows: repeat(20, 1fr);
    transition: all 0.3s ease;
}

.sub-cell {
    width: 100%;
    height: 100%;
}

/* Style pour la surbrillance des cellules */
.user-cell.highlighted::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border: 4px solid rgba(223, 223, 223, 0.8);
    pointer-events: none;
    z-index: 1500;
}

/* États du zoom - ajustement pour la visibilité */
body.disconnected #zone-2a1 .zoom-normal,
body.disconnected #zone-2a1 .zoom-active {
    opacity: 0.3;
}

/* États du zoom */
#zone-2a1.zoomed .zoom-normal {
    display: none;
}

#zone-2a1.zoomed .zoom-active {
    display: block !important;
}

/* Ajouter ces styles avec les autres styles d'overlay */
#welcome-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--overlay-background);
    z-index: 2000;
    visibility: hidden;  /* Utiliser visibility au lieu de display */
    font-family: Calibri, 'Trebuchet MS', sans-serif;
    opacity: 0;
    transition: opacity 0.3s ease-out, visibility 0.3s ease-out, background-color 0.3s ease;  /* Transition sur les deux propriétés */
}

/* Quand il est visible */
body.welcoming #welcome-overlay {
    visibility: visible;  /* Utiliser visibility au lieu de display */
    opacity: 1;
}

/* Les autres styles (.overlay-title, .overlay-subtitle, etc.) seront réutilisés */

/* Style du bouton de thème */
#zone-2c1 .tool-circle { 
    background-color: #000000;
    cursor: pointer;
    width: 100%;
    height: 100%;
    transition: background-color 0.3s ease;
}

/* Style des icônes de thème */
#zone-2c1 .theme-icon {
    width: min(40%, 40px);
    height: min(40%, 40px);
    position: relative;
}

/* États du thème */
.theme-light {
    display: none;
}

/* Quand le mode clair est actif */
body.light-mode #zone-2c1 .tool-circle {
    background-color: #ffffff;
}

body.light-mode #zone-2c1 .theme-dark {
    display: none;
}

body.light-mode #zone-2c1 .theme-light {
    display: block;
}

/* Style spécifique pour les icônes de thème */
#zone-2c1 .theme-icon {
    width: min(40%, 40px);
    height: min(40%, 40px);
    position: relative;
}

/* Couleurs des boutons standards */
#zone-3a1 .tool-circle,
#zone-3a2 .tool-circle,
#zone-3c1 .tool-circle,
#zone-3c2 .tool-circle,
#zone-2a2 .tool-circle,
#zone-2c1 .tool-circle,
#zone-2c2 .tool-circle {
    background-color: var(--background-color);
}

/* La grille principale */
.main-zone {
    background-color: var(--grid-background);
    transition: background-color 0.3s ease;
}

/* Curseur d'activité */
.activity-box {
    background-color: var(--background-color);
    transition: background-color 0.3s ease;
}

/* Bouton reconnect et son texte */
#reconnect-button {
    background-color: var(--background-color);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Styles pour le mode clair */
body.light-mode #reconnect-button {
    background-color: var(--background-color);
    color: var(--text-color);
}

/* Curseur d'activité - conteneur et curseur */
.activity-box {
    background-color: var(--background-color);
    transition: background-color 0.3s ease;
}

.activity-cursor {
    background-color: var(--background-color);
    transition: background-color 0.3s ease;
}

/* Ajuster les bordures pour le mode clair */
body.light-mode .main-zone {
    border-left: 1px solid #cccccc;
    border-right: 1px solid #cccccc;
}

/* Styles pour le zoom */
#poietic-grid {
  transform-origin: center;
  will-change: transform;
  position: relative;
}

/* Modification du conteneur principal pour maintenir le cadre carré */
.main-zone {
  position: relative;
  overflow: hidden;
  aspect-ratio: 1;
}

/* Indicateur visuel pour le bouton de zoom */
#zone-2a1.zoomed .zoom-normal {
  display: none;
}

#zone-2a1.zoomed .zoom-active {
  display: block;
}

/* Style de base pour l'icône de zoom */
#zone-2a1 .zoom-icon {
    width: min(40%, 40px);
    height: min(40%, 40px);
    position: relative;
    color: var(--text-color);
}

/* Conteneur du petit carré */
.inner-square-container {
    transform-origin: 15px 9px; /* Centre du petit carré */
    transition: transform 0.3s ease;
}

/* État zoomé */
#zone-2a1[data-state="zoomed"] .inner-square-container {
    transform: translate(-3px, 3px) scale(3);
}

/* État déconnecté */
body.disconnected #zone-2a1 .zoom-icon {
    opacity: 0.3;
}

/* Style de l'icône d'import */
#zone-2a2 .import-icon {
    width: min(40%, 40px);
    height: min(40%, 40px);
    position: relative;
    color: var(--text-color);
}

/* État déconnecté */
body.disconnected #zone-2a2 .import-icon {
    opacity: 0.3;
}

/* Media queries */
@media (orientation: landscape) {
    #main-container {
        flex-direction: row;
        justify-content: center;
    }

    .tools-zone {
        flex-direction: column;
        width: max(0px, calc((100vw - min(100vh, 66.66vw)) / 2));
        min-width: 0;
    }

    #zone-3b, #zone-2b {
        height: calc(100vh / 3);
        width: 100%;
        min-height: 0;
    }

    .sub-zone {
        flex-direction: row;
        height: calc(100vh / 3);
        min-height: 0;
    }

    .split-zone {
        width: 50%;
        height: 100%;
    }

    .tool-circle {
        width: 100%;
        height: 100%;
        min-height: 0;
    }

    .main-zone {
        height: min(100vh, 66.66vw);
        width: min(100vh, 66.66vw);
        flex: 0 0 auto;
        border-left: 1px solid #333;
        border-right: 1px solid #333;
    }

    .activity-box {
        border-top: 1px solid #333;
        border-bottom: 1px solid #333;
    }

    #reconnect-button {
        border-top: 1px solid #333;
        border-bottom: 1px solid #333;
    }
    
    body.light-mode .activity-box {
        border-top: 1px solid #cccccc;
        border-bottom: 1px solid #cccccc;
    }
}

@media (orientation: portrait) {
    #main-container {
        flex-direction: column;
        align-items: center;
    }

    .tools-zone {
        flex-direction: row;
        height: max(0px, calc((100vh - min(100vw, 66.66vh)) / 2));
        min-height: 0;
    }

    #zone-3b, #zone-2b {
        width: calc(100vw / 3);
        height: 100%;
        min-height: 0;
    }

    .sub-zone {
        flex-direction: column;
        width: calc(100vw / 3);
        min-height: 0;
    }

    .split-zone {
        width: 100%;
        height: 50%;
        min-height: 0;
    }

    .tool-circle {
        width: 100%;
        height: 100%;
        min-width: 0;
        min-height: 0;
    }

    .main-zone {
        width: 100%;
        height: min(100%, 66.66vh);
        flex: 0 0 auto;
        border-top: 1px solid #333;
        border-bottom: 1px solid #333;
    }

    .activity-box {
        border-left: 1px solid #333;
        border-right: 1px solid #333;
    }

    #reconnect-button {
        border-left: 1px solid #333;
        border-right: 1px solid #333;
    }

    body.light-mode .activity-box {
        border-left: 1px solid #cccccc;
        border-right: 1px solid #cccccc;
    }
}

.user-cell.importing-image {
    transition: background-color 0.2s ease-in-out;
}

.user-cell.importing-image > div {
    transition: background-color 0.3s ease-in-out;
}

.tool-circle.processing {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
}

.user-cell.importing-image > div {
    transition: background-color 0.3s ease-in-out;
}

@keyframes processing-pulse {
    0% { opacity: 0.5; }
    50% { opacity: 0.8; }
    100% { opacity: 0.5; }
}

.tool-circle.processing {
    animation: processing-pulse 2s infinite;
}

.share-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
}

.modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px;
}

.share-preview {
    position: relative;
    background: transparent;
    padding: 30px 30px 5px 30px;
    line-height: 0;
}

.share-preview img {
    max-height: 80vh;
    max-width: 90vw;
    height: auto;
    width: auto;
}

.close-button {
    position: absolute;
    top: 5px;
    right: 5px;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    z-index: 10000;
}

.share-options {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 10px;
}

.share-option {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    padding: 5px 10px;
}

/* Mise à jour des styles pour les palettes */
#gradient-palette,
#user-palette {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
    border-radius: 0;
    display: none;
    cursor: crosshair;
    z-index: 450;
    background-color: #000000;
}

/* Ajout d'une classe spécifique pour les palettes actives */
.palette-active {
    display: block !important;
    width: 100% !important;
    height: 100% !important;
}

/* En format paysage (par défaut) */
#zone-2b {
    border-top: 1px solid #666;
    border-bottom: 1px solid #666;
    border-left: none;
    border-right: none;
}

/* En format portrait */
@media (orientation: portrait) {
    #zone-2b {
        border-top: none;
        border-bottom: none;
        border-left: 1px solid #666;
        border-right: 1px solid #666;
    }
}

/* Optimisations mobiles */
html, body {
    position: fixed;
    width: 100%;
    height: 100%;
    overflow: hidden;
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
}

#main-container {
    width: 100%;
    height: 100%;
    overflow: hidden;
    position: fixed;
    /* Support pour le notch sur iOS */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Désactiver les sélections de texte sur mobile */
* {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

/* Ajuster la taille des éléments tactiles */
.tool-circle {
    min-width: 44px;  /* Recommandation Apple pour la taille minimale */
    min-height: 44px;
}

/* Optimisation pour les écrans avec notch */
@supports (padding: max(0px)) {
    body {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
        padding-top: max(0px, env(safe-area-inset-top));
        padding-bottom: max(0px, env(safe-area-inset-bottom));
    }
}

/* Ajustements spécifiques pour les petits écrans */
@media (max-width: 480px) {
    .tools-zone {
        min-width: 44px; /* Taille minimale pour les zones d'outils */
    }
    
    .tool-circle svg {
        transform: scale(0.8); /* Réduire légèrement la taille des icônes */
    }
}

/* Style des icônes statistiques */
.stat-icon {
    width: min(35%, 35px);
    height: min(35%, 35px);
    position: relative;
    color: var(--text-color);
    margin-bottom: 5px;
}

.tool-circle {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.stat-value {
    color: var(--text-color);
    font-size: 12px;
    font-family: monospace;
    margin-top: 5px;
}

/* État déconnecté */
body.disconnected .stat-icon,
body.disconnected .stat-value {
    opacity: 0.3;
}

/* Ajout des styles pour les titres des statistiques */
.stat-title {
    color: var(--text-color);
    font-size: 14px;
    font-family: Calibri, 'Trebuchet MS', sans-serif;
    font-weight: bold;
    margin-bottom: 5px;
}

/* État déconnecté pour les titres */
body.disconnected .stat-title {
    opacity: 0.3;
}

/* Ajustement du conteneur pour le nouveau format */
.tool-circle {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 5px;
    text-align: center;
}

/* Ajustement pour les petits écrans */
@media (max-width: 480px) {
    .stat-title {
        font-size: 12px;
    }
}

/* Styles pour les détails des statistiques */
.stat-details {
    width: 100%;
    padding: 2px 0;
    font-size: 11px;
    font-family: monospace;
}

.stat-row {
    display: flex;
    justify-content: flex-start;
    align-items: baseline;
    margin: 2px 0;
    color: var(--text-color);
    white-space: nowrap;
    padding-left: 8px;  /* Indentation de base */
}

.stat-label {
    min-width: 90px;  /* Largeur fixe pour aligner les valeurs */
    opacity: 0.8;
}

.stat-value {
    flex: 1;
}

/* Ajustement du conteneur principal */
.tool-circle {
    padding: 8px 5px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;  /* Aligner à gauche plutôt qu'au centre */
    justify-content: flex-start;
}

.stat-title {
    margin-bottom: 4px;
    font-weight: bold;
    align-self: center;  /* Garder le titre centré */
}

/* Styles spécifiques pour le mode horizontal */
@media (orientation: landscape) {
    .tool-circle {
        height: 100%;
        overflow-y: auto;  /* Permettre le défilement si nécessaire */
        scrollbar-width: thin;  /* Pour Firefox */
    }
    
    .tool-circle::-webkit-scrollbar {
        width: 4px;  /* Pour Chrome/Safari */
    }
    
    .tool-circle::-webkit-scrollbar-thumb {
        background-color: var(--text-color);
        opacity: 0.3;
    }
    
    .stat-details {
        width: 100%;
    }
    
    .stat-row {
        font-size: 10px;  /* Légèrement plus petit en mode horizontal */
        margin: 1px 0;
    }
    
    .stat-label {
        min-width: 70px;  /* Plus compact en mode horizontal */
    }
}

/* Styles spécifiques pour le mode vertical */
@media (orientation: portrait) {
    .tool-circle {
        padding: 5px;
    }
    
    .stat-details {
        width: 100%;
    }
    
    .stat-row {
        justify-content: space-between;  /* Plus espacé en mode vertical */
        padding-left: 12px;  /* Indentation plus prononcée */
    }
    
    .stat-label {
        margin-right: 8px;
    }
}

/* Style pour les indicateurs vectoriels */
.vector-indicator {
    display: inline-block;
    margin: 0 2px;
    transition: transform 0.3s ease;
}

/* Rotations pour les indicateurs de vecteur */
.vector-indicator[data-direction="up"] {
    transform: rotate(-90deg);
}

.vector-indicator[data-direction="down"] {
    transform: rotate(90deg);
}

/* État déconnecté */
body.disconnected .stat-details {
    opacity: 0.3;
}

/* Optimisations pour très petits écrans */
@media (max-width: 480px) {
    .stat-details {
        font-size: 9px;
    }
    
    .stat-row {
        margin: 1px 0;
    }
    
    .stat-label {
        min-width: 60px;
    }
}

/* Optimisations pour écrans moyens */
@media (min-width: 481px) and (max-width: 768px) {
    .stat-details {
        font-size: 10px;
    }
    
    .stat-label {
        min-width: 80px;
    }
}

/* Style spécifique pour les tool-circle contenant des statistiques */
.tool-circle:has(.stat-details) {
    padding: 8px 5px;
    justify-content: flex-start;
    align-items: stretch;
}

/* Conteneur des statistiques */
.stat-details {
    width: 100%;
    padding: 2px 0;
    font-size: 11px;
    font-family: monospace;
}

.stat-row {
    display: flex;
    justify-content: flex-start;
    align-items: baseline;
    margin: 2px 0;
    color: var(--text-color);
    white-space: nowrap;
    padding-left: 8px;
}

.stat-label {
    min-width: 90px;
    opacity: 0.8;
}

.stat-value {
    flex: 1;
}

.stat-title {
    width: 100%;
    text-align: center;
    margin-bottom: 4px;
    font-weight: bold;
}

/* Styles pour les icônes */
.zoom-icon,
.import-icon,
.theme-icon,
.share-icon {
    width: min(40%, 40px);
    height: min(40%, 40px);
}

/* Media queries pour l'orientation */
@media (orientation: landscape) {
    .tool-circle:has(.stat-details) {
        overflow-y: auto;
        scrollbar-width: thin;
    }
    
    .tool-circle:has(.stat-details)::-webkit-scrollbar {
        width: 4px;
    }
    
    .tool-circle:has(.stat-details)::-webkit-scrollbar-thumb {
        background-color: var(--text-color);
        opacity: 0.3;
    }
    
    .stat-row {
        font-size: 10px;
        margin: 1px 0;
    }
    
    .stat-label {
        min-width: 70px;
    }
}

@media (orientation: portrait) {
    .tool-circle:has(.stat-details) {
        padding: 5px;
    }
    
    .stat-row {
        justify-content: space-between;
        padding-left: 12px;
    }
    
    .stat-label {
        margin-right: 8px;
    }
}

/* Optimisations pour différentes tailles d'écran */
@media (max-width: 480px) {
    .stat-details {
        font-size: 9px;
    }
    
    .stat-row {
        margin: 1px 0;
    }
    
    .stat-label {
        min-width: 60px;
    }
}

@media (min-width: 481px) and (max-width: 768px) {
    .stat-details {
        font-size: 10px;
    }
    
    .stat-label {
        min-width: 80px;
    }
}

/* État déconnecté */
body.disconnected .stat-details,
body.disconnected .zoom-icon,
body.disconnected .import-icon,
body.disconnected .theme-icon,
body.disconnected .share-icon {
    opacity: 0.3;
}

/* Style spécifique pour les zones de statistiques */
.stat-details {
    width: 100%;
    padding: 2px 0;
    font-size: 11px;
    font-family: monospace;
}

/* Conteneur pour les icônes */
.tool-circle svg {
    width: min(40%, 40px);
    height: min(40%, 40px);
}

/* Style spécifique pour les zones avec statistiques */
.tool-circle.with-stats {
    padding: 8px 5px;
    justify-content: flex-start;
}

/* Ajout de la classe with-stats dans le HTML pour les zones concernées */

/* Ajout aux styles existants */
.stat-group {
    margin: 4px 0;
}

.stat-header {
    display: flex;
    align-items: center;
    gap: 4px;
}

.indented {
    padding-left: 16px;
    font-family: monospace;
}

.vector-indicator {
    display: inline-block;
    transition: transform 0.3s ease;
}

/* Ajustement des marges et espacements */
.stat-label {
    min-width: unset; /* Supprime la largeur fixe précédente */
}

.stat-value {
    line-height: 1.4;
}

/* Media queries pour l'adaptation responsive */
@media (max-width: 480px) {
    .indented {
        padding-left: 12px;
    }
}

/* Style de base pour le conteneur de statistiques */
.stat-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center; /* Centre verticalement */
    padding: 5px;
}

.stat-title {
    width: 100%;
    text-align: center;
    font-weight: bold;
    margin-bottom: 5px;
}

.stat-details {
    width: 100%;
    font-size: 11px;
    font-family: monospace;
}

.stat-group {
    margin: 2px 0;
}

.stat-row {
    padding-left: 12px;
    white-space: nowrap;
    color: var(--text-color);
}

/* Styles spécifiques pour l'orientation horizontale */
@media (orientation: landscape) {
    .tools-zone {
        display: flex;
        flex-direction: column;
    }

    .sub-zone {
        flex: 1;
        display: flex;
    }

    .split-zone {
        flex: 1;
        display: flex;
    }

    /* Alignement horizontal des titres */
    #zone-3a .split-zone {
        display: flex;
        align-items: flex-start;
    }

    #zone-3a .stat-container {
        justify-content: flex-start;
        padding-top: 8px; /* Espace uniforme en haut */
    }
}

/* Styles spécifiques pour l'orientation verticale */
@media (orientation: portrait) {
    .stat-container {
        padding: 3px;
        line-height: 1.2; /* Interligne réduit */
    }

    .stat-group {
        margin: 1px 0; /* Espacement réduit entre les groupes */
    }

    .stat-title {
        margin-bottom: 2px; /* Espacement réduit après le titre */
        font-size: 0.9em; /* Titre légèrement plus petit */
    }

    .stat-details {
        font-size: 10px; /* Texte légèrement plus petit */
    }

    .stat-row {
        padding-left: 8px; /* Indentation réduite */
    }
}

/* Ajustements pour très petits écrans */
@media (max-width: 480px) {
    .stat-details {
        font-size: 9px;
    }
    
    .stat-container {
        padding: 2px;
        line-height: 1.1;
    }
}

/* Ajustements pour la zone centrale en mode horizontal */
@media (orientation: landscape) {
    #zone-3b {
        flex: 2; /* Donne plus d'espace à la zone centrale */
    }
}

/* Style de base */
.tool-circle {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.stat-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 8px;
}

/* Structure des lignes de stats */
.stat-row {
    display: flex;
    width: 100%;
}

.stat-label {
    flex: 1;
    text-align: left;
    white-space: nowrap;
}

.stat-value {
    text-align: right;
    white-space: nowrap;
    padding-left: 8px;
    padding-right: 12px;
}

/* Format horizontal */
@media (orientation: landscape) {
    .tools-zone {
        display: flex;
        flex-direction: column;
    }

    .sub-zone {
        flex: 1;
        display: flex;
        overflow: hidden;
    }

    .split-zone {
        flex: 1;
        display: flex;
        position: relative;
        overflow: hidden;
    }

    /* Container de base */
    .stat-container {
        padding: 8px;
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* Titres centrés */
    .stat-title {
        position: absolute;
        top: 80px;
        left: 0;
        width: 100%;
        text-align: center !important;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0;
    }

    /* Contenu */
    .stat-details {
        position: absolute;
        top: 55%;
        transform: translateY(-50%);
        width: calc(100% - 16px);
        padding: 0 8px;
    }

    /* Structure des lignes */
    .stat-row {
        display: flex;
        width: 100%;
        margin-bottom: 4px;
    }

    .stat-label {
        flex: 1;
        text-align: left;
    }

    .stat-value {
        text-align: right;
        padding-left: 8px;
        padding-right: 12px;
    }

    /* Empêcher tout overflow */
    .tool-circle {
        overflow: hidden;
    }
}

/* Format vertical - garder les styles qui fonctionnent */
@media (orientation: portrait) {
    .tools-zone {
        display: flex;
        flex-direction: row;
    }

    .sub-zone {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .split-zone {
        flex: 1;
        display: flex;
    }

    /* Alignement des titres en vertical */
    #zone-3a1 .stat-container,
    #zone-3c1 .stat-container {
        padding-top: 8px;
    }

    #zone-3a2 .stat-container,
    #zone-3c2 .stat-container {
        padding-top: 8px;
    }
}

/* Tailles de police */
@media (orientation: landscape) {
    .stat-title,
    .stat-label,
    .stat-value {
        font-size: 11px;
        line-height: 1.4;
    }
}

@media (orientation: portrait) {
    .stat-title,
    .stat-label,
    .stat-value {
        font-size: 8px;
        line-height: 1;
    }

    #zone-3a2 .stat-title,
    #zone-3a2 .stat-label,
    #zone-3a2 .stat-value,
    #zone-3c2 .stat-title,
    #zone-3c2 .stat-label,
    #zone-3c2 .stat-value {
        font-size: 7px;
        line-height: 0.9;
    }
}